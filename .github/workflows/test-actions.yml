name: Test Custom Actions

on: 
  pull_request: # Run on every PR to prevent broken actions from merging
  workflow_dispatch: # Allow manual triggering

jobs:
#   unit-tests:
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v4
#       - name: Setup Bats
#         uses: bat-core/bats-action@3.0.0
#       - name: Run Bats
#         run: bats tests/entrypoint.bats

  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      
      # Lint all shell scripts
      - name: Run ShellCheck
        uses: ludeeus/action-shellcheck@master
        with:
          scandir: './.github/actions'

      # Validate YAML syntax for workflows and actions
      - name: Validate Action YAML
        uses: jazzsequence/github-action-validator@v1

#   # ----------------------------------------------------
#   # TEST CASE 1: Composite Action (Bash)
#   # ----------------------------------------------------
#   test-composite-action:
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v4

# #       # 1. Run the action
# #       - name: Run Greeting Action
# #         id: test-action
# #         uses: ./.github/actions/my-custom-action
# #         with:
# #           who-to-greet: 'Tester'

# #       # 2. Verify Output (Assertion)
# #       - name: Assert Output
# #         shell: bash
# #         run: |
# #           # Check if the output variable equals expected value
# #           # Note: In real scenarios, you might check if a file exists or a version string matches.
          
# #           OUTPUT="${{ steps.test-action.outputs.random-number }}"
          
# #           if [[ -z "$OUTPUT" ]]; then
# #             echo "❌ Error: Output 'random-number' was empty"
# #             exit 1
# #           else
# #             echo "✅ Success: Received random number $OUTPUT"
# #           fi

# #   # ----------------------------------------------------
# #   # TEST CASE 2: Docker Action
# #   # ----------------------------------------------------
# #   test-docker-action:
# #     runs-on: ubuntu-latest
# #     steps:
# #       - uses: actions/checkout@v4

# #       - name: Run Docker Action
# #         id: docker-test
# #         uses: ./.github/actions/my-docker-task
# #         with:
# #           who-to-greet: 'Docker Tester'

# #       - name: Assert Memory Output exists
# #         run: |
# #           MEMORY="${{ steps.docker-test.outputs.memory }}"
# #           echo "Memory reported: $MEMORY"
          
# #           if [[ "$MEMORY" != *"%"* ]]; then
# #              echo "❌ Error: Memory output does not look like a percentage"
# #              exit 1
# #           fi
